{"version":3,"sources":["resources/home.png","utility/cookier/index.ts","config/index.ts","data/repository/user_api_provider.ts","utility/storager/index.ts","app_bloc.ts","layouts/pages/_components/header.tsx","layouts/pages/_components/scaffold.tsx","layouts/pages/home.tsx","utility/bloc/bloc_utility.ts","utility/bloc/common_state.ts","layouts/pages/audience/bloc.ts","layouts/pages/audience/index.tsx","color_palette.ts","layouts/pages/_components/text_field_ex.tsx","data/repository/streamer_api_provider.ts","layouts/pages/streamer/judge_viewer_section/bloc.ts","layouts/pages/_components/auto_snackbar.tsx","layouts/pages/streamer/judge_viewer_section/index.tsx","layouts/pages/streamer/index.tsx","layouts/pages/manager/judgement_streamer_section/bloc.ts","layouts/pages/manager/judgement_streamer_section/index.tsx","layouts/pages/manager/index.tsx","layouts/pages/user_home.tsx","theme.tsx","index.tsx","App.tsx"],"names":["module","exports","CookieTable","config","api","isProduction","process","twitchClientId","url","UserApiProvider","loginReq","superagent","post","set","send","res","user","body","console","log","token","get","page","id","Cookie","value","undefined","CookieManager","this","_instance","StoragerTable","Storager","window","localStorage","setItem","JSON","stringify","parse","getItem","Permission","AuthenticationState","UninitializedState","LoadingState","LoadedState","error","AuthenticationEvent","LoginEvent","LogoutEvent","AppStartEvent","hashLocation","RestartEvent","AuthenticationBloc","Cookier","Token","User","event","_mapLoginEventToState","_mapLogOutToState","includes","dispatch","split","replace","history","replaceState","_mapAppStartEventToState","getUser","newUser","currentState","twitchLogin","Bloc","AuthenticationContext","React","createContext","useStyles","makeStyles","theme","createStyles","panel","marginTop","marginBottom","content","padding","border","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","margin","activePage","color","palette","primary","main","cardMedia","width","spacing","noneBorder","borderRadius","tableTitle","borderBottom","root","flexGrow","menuButton","marginRight","title","Header","classes","useState","bloc","useContext","useHistory","AppBar","Toolbar","Typography","variant","className","builder","state","displayName","IconButton","onClick","_","Link","href","Button","style","fontWeight","Copyright","Date","getFullYear","props","display","flexDirection","minHeight","background","backgroundSize","height","isFillMain","breakpoints","up","footer","textAlign","backgroundColor","Scaffold","children","HomeSrc","CssBaseline","Container","component","maxWidth","Home","justifyContent","alignItems","gutterBottom","useBloc","isBlocExisted","CommonState","isLoading","isFailure","isSuccess","ApplyEvent","Joi","object","code","number","required","type","string","message","any","keys","valid","AudienceBloc","empty","_mapApplyEventToState","loading","apply","success","failure","AudienceHome","authBloc","LoadingView","FailureView","AuthenticatedView","isRequested","UnauthenticatedView","to","e","CircularProgress","ColorPalette","primaryColor","secondaryColor","fontOnPColor","fontOnSColor","TextFieldEx","observedValue","observedChanged","onChange","_value","_setValue","useEffect","TextField","currentTarget","request","del","JudgeViewerEvent","BanEvent","username","reason","UnBanEvent","JudgeViewerBloc","_mapBanEventToState","_mapUnBanEventToState","StreamerApiProvider","banUser","status","unbanUser","Alert","elevation","AutoSnackbar","date","severity","open","setOpen","handleClose","Snackbar","autoHideDuration","onClose","cardRoot","light","secondary","textField","dark","JudgeViewerSection","useTheme","usernameText","reasonText","Fragment","Card","CardContent","placeholder","fullWidth","InputLabelProps","shrink","inputProps","helperText","Box","Fab","text","StreamerHome","JudgeStreamerState","EmptyState","users","selectedId","SuccessLoadedState","FailureLoadedState","JudgeStreamerEvent","RefreshEvent","ScrollToEndEvent","VerifyEvent","SelectEvent","JudgeStreamerBloc","_mapRefreshEventToState","_mapScrollToEndEventToState","_mapVerifyEventToState","_mapSelectEventToState","getAppliers","appliers","length","i","applier","find","push","confirmApplier","filter","selected","listTileRoot","ListSection","isEmptyState","isLoadedState","isLoadingState","List","ListItem","button","ListItemText","resultState","map","key","ListItemAvatar","Avatar","src","profileImage","Popup","JudgeStreamerSection","handleScroll","scrollTop","scrollHeight","clientHeight","offsetHeight","Math","ceil","maxHeight","overflow","onScroll","disabled","ManagerHome","UserHome","permission","audience","streamer","manager","createMuiTheme","red","A400","default","typography","fontFamily","join","ReactDOM","render","ThemeProvider","location","hash","Provider","path","document","querySelector"],"mappings":"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","file":"static/js/main.dfb1238c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/home.e3e24c40.png\";","import CookieManager from 'js-cookie';\r\nimport { UserResponse } from '../../data/types/response';\r\n\r\nenum CookieTable {\r\n  token = \"TOKEN\",\r\n  user = \"USER\",\r\n}\r\n\r\nclass Cookie\r\n{\r\n    private static _instance: Cookie;\r\n\r\n    private constructor()\r\n    {\r\n    }\r\n\r\n    public set Token(value: string | undefined) {\r\n      if(value === undefined)\r\n        CookieManager.set(CookieTable.token, {});\r\n      if(typeof value === \"string\")\r\n        CookieManager.set(CookieTable.token, value);\r\n    }\r\n    public get Token(): string | undefined {\r\n      return CookieManager.get(CookieTable.token);\r\n    }\r\n\r\n    public set User(value: UserResponse | null) {\r\n      CookieManager.set(CookieTable.user, value as Object);\r\n    }\r\n\r\n    public get User() : UserResponse | null {\r\n      return CookieManager.get(CookieTable.user) as UserResponse;\r\n    }\r\n\r\n    public static get Instance()\r\n    {\r\n      return this._instance || (this._instance = new Cookie());\r\n    }\r\n}\r\n\r\nexport default Cookie.Instance;","let config = {\r\n  api: process.env.NODE_ENV === 'production' ? \"https://tokenyet-glitchbotrp.glitch.me/api\" : \"http://localhost:3050/api\",\r\n  isProduction: process.env.NODE_ENV === 'production',\r\n  twitchClientId: \"ji2x3mhdh53rl5ezek9j6xamsolds4\", // Just for testing.\r\n};\r\nexport default config;","import superagent from 'superagent';\r\nimport {UserRegisterRequest, UserApplyConfirmRequest} from '../types/request';\r\nimport {UserResponse, GuestUserResponse, SuccessResponse, ErrorResponse} from '../types/response';\r\nimport config from '../../config';\r\n\r\nconst url = \"/users\";\r\nclass UserApiProvider {\r\n  static async twitchLogin(loginReq: UserRegisterRequest) : Promise<UserResponse | null> {\r\n    try {\r\n      const res = await superagent.post(config.api + `${url}`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        // .set({'Authorization': 'Bearer ' + token})\r\n        .send(loginReq);\r\n      const user = res.body as UserResponse;\r\n      return user;\r\n    } catch(err) {\r\n      console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static async getUser(token: string) : Promise<UserResponse | null> {\r\n    try {\r\n      const res = await superagent\r\n        .get(config.api + `${url}`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        .set({'Authorization': 'Bearer ' + token})\r\n        .send();\r\n      const user = res.body as UserResponse;\r\n      return user;\r\n    } catch(err) {\r\n      // console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static async apply(token: string) : Promise<SuccessResponse | ErrorResponse | null> {\r\n    try {\r\n      const res = await superagent\r\n        .post(config.api + `${url}/apply`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        .set({'Authorization': 'Bearer ' + token})\r\n        .send();\r\n      // const response = res.body as SuccessResponse;\r\n      return res.body;\r\n    } catch(err) {\r\n      console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  \r\n  /**\r\n   * Get appliers need manager authorization\r\n   */\r\n  static async getAppliers(token: string, page: number = 0) : Promise<Array<GuestUserResponse> | null> {\r\n    try {\r\n      const res = await superagent\r\n        .get(config.api + `${url}/apply?page=${page}`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        .set({'Authorization': 'Bearer ' + token})\r\n        .send();\r\n      // const response = res.body as SuccessResponse;\r\n      return res.body as Array<GuestUserResponse>;\r\n    } catch(err) {\r\n      console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Confirm applier need manager authorization\r\n   */\r\n  static async confirmApplier(token: string, id: string) : Promise<SuccessResponse | ErrorResponse | null> {\r\n    try {\r\n      const res = await superagent\r\n        .post(config.api + `${url}/apply/confirm`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        .set({'Authorization': 'Bearer ' + token})\r\n        .send({\r\n          id: id\r\n        });\r\n      // const response = res.body as SuccessResponse;\r\n      return res.body;\r\n    } catch(err) {\r\n      console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default UserApiProvider;","import { UserResponse } from '../../data/types/response';\r\n\r\nenum StoragerTable {\r\n  user = \"USER\",\r\n}\r\n\r\nclass Storager\r\n{\r\n    private static _instance: Storager;\r\n\r\n    private constructor()\r\n    {\r\n    }\r\n\r\n    public set User(value: UserResponse | null) {\r\n      window.localStorage.setItem(StoragerTable.user, JSON.stringify(value));\r\n    }\r\n\r\n    public get User() : UserResponse | null {\r\n      return JSON.parse(window.localStorage.getItem(StoragerTable.user) as string) as UserResponse;\r\n    }\r\n\r\n    public static get Instance()\r\n    {\r\n      return this._instance || (this._instance = new Storager());\r\n    }\r\n}\r\n\r\nexport default Storager.Instance;","import React from 'react';\r\n// import createReactContext, { Context } from 'create-react-context';\r\nimport { Bloc } from '@felangel/bloc'\r\nimport UserApiProvider from './data/repository/user_api_provider';\r\nimport StreamerApiProvider from './data/repository/streamer_api_provider';\r\nimport { CommonState } from './utility/bloc/common_state';\r\nimport { UserResponse } from './data/types/response';\r\nimport Cookier from './utility/cookier';\r\nimport Storager from './utility/storager';\r\n\r\n// export enum AuthenticationState {\r\n//   unAuthenticaed,\r\n//   unInitialized,\r\n//   authenticated,\r\n// }\r\n\r\n// state 不能有東西 沒辦法 compare\r\n// class UninitializedState extends AuthenticationState {}\r\n// class UnAuthenticatedState extends AuthenticationState {}\r\n// class AuthenticatedState extends AuthenticationState {}\r\n\r\nexport enum Permission {\r\n  audience='audience',\r\n  streamer='streamer',\r\n  manager='manager',\r\n};\r\n\r\nexport abstract class AuthenticationState {\r\n  token?: string;\r\n  user?: UserResponse;\r\n  constructor(token?: string, user?: UserResponse) {\r\n    this.user = user;\r\n    this.token = token;\r\n  }\r\n}\r\n\r\nexport class UninitializedState extends AuthenticationState {\r\n  constructor(token?: string, user?: UserResponse) {\r\n    super(token, user);\r\n  }\r\n}\r\n\r\nexport class LoadingState extends AuthenticationState {\r\n  constructor(token?: string, user?: UserResponse) {\r\n    super(token, user);\r\n  }\r\n}\r\n\r\nexport class LoadedState extends AuthenticationState {\r\n  error: boolean;\r\n  constructor(token?: string, user?: UserResponse, error: boolean = false) {\r\n    super(token, user);\r\n    this.error = error;\r\n  }\r\n}\r\n\r\n\r\nexport abstract class AuthenticationEvent { // 理論上不用 compare...\r\n}\r\n\r\nexport class LoginEvent extends AuthenticationEvent {\r\n  token: string\r\n  constructor(token: string) {\r\n    super();\r\n    this.token = token;\r\n  };\r\n}\r\n\r\nexport class LogoutEvent extends AuthenticationEvent {  \r\n}\r\n\r\nexport class AppStartEvent extends AuthenticationEvent {\r\n  hashLocation: string;\r\n  constructor(hashLocation: string) {\r\n    super();\r\n    this.hashLocation = hashLocation;\r\n  }\r\n}\r\n\r\nexport class RestartEvent extends AuthenticationEvent {\r\n}\r\n\r\n\r\nexport class AuthenticationBloc extends Bloc<AuthenticationEvent, AuthenticationState> {\r\n\r\n  constructor(){\r\n    super();\r\n  }\r\n\r\n  initialState(): AuthenticationState {\r\n    const token = Cookier.Token;\r\n    const user = Storager.User as UserResponse;\r\n    return new UninitializedState(token, user);\r\n  }\r\n\r\n  async *mapEventToState(event: AuthenticationEvent) {\r\n    if(event instanceof LoginEvent) {\r\n      // console.log(`LoginEvent: ${JSON.stringify(event)}`);\r\n      yield* this._mapLoginEventToState(event);\r\n    } else if(event instanceof LogoutEvent) {\r\n      // console.log(`LogoutEvent: ${JSON.stringify(event)}`);\r\n      yield* this._mapLogOutToState(event);\r\n    } else if(event instanceof AppStartEvent) {\r\n      console.log(event.hashLocation);\r\n      if(event.hashLocation.includes(\"#/access_token\")) {\r\n        this.dispatch(new LoginEvent(event.hashLocation.split(\"&\")[0].replace(\"#/access_token=\", \"\")));\r\n        window.history.replaceState({}, \"Home\", \"/\");\r\n      }\r\n      else\r\n      // console.log(`AppStartEvent: ${JSON.stringify(event)}`);\r\n        yield* this._mapAppStartEventToState(event);\r\n    } else if(event instanceof RestartEvent) {\r\n      yield* this._mapAppStartEventToState(new AppStartEvent(\"\"));\r\n    }\r\n  }\r\n\r\n  private async *_mapAppStartEventToState(event: AppStartEvent) {\r\n    const token = Cookier.Token as string; // refresh\r\n    const user = Storager.User as UserResponse;\r\n    yield new LoadingState(token, user);\r\n    console.log(\"APP START!\");\r\n    // console.log(token);\r\n    if(!token)\r\n    {\r\n      Cookier.Token = undefined;\r\n      Storager.User = null;\r\n      yield new LoadedState();\r\n      return;\r\n    }\r\n\r\n    const newUser = await UserApiProvider.getUser(token);\r\n    if(!newUser)\r\n    {\r\n      Cookier.Token = undefined;\r\n      Storager.User = null;\r\n      yield new LoadedState(undefined, undefined, true);\r\n      return;\r\n    }\r\n\r\n    Cookier.Token = newUser.token;\r\n    Storager.User = newUser;\r\n    yield new LoadedState(token, newUser);\r\n  }\r\n\r\n\r\n  private async *_mapLoginEventToState(event: LoginEvent) {\r\n    yield new LoadingState(this.currentState.token, this.currentState.user);\r\n    const user = await UserApiProvider.twitchLogin({\r\n       token: event.token\r\n    });\r\n    if(!user)\r\n    {\r\n      Cookier.Token = undefined;\r\n      Storager.User = null;\r\n      yield new LoadedState(undefined, undefined, true);\r\n      return;\r\n    }\r\n    Cookier.Token = user.token;\r\n    Storager.User = user;\r\n    yield new LoadedState(user.token, user);\r\n  }\r\n\r\n  private async *_mapLogOutToState(event: LogoutEvent) {\r\n    // Storager.User = null;\r\n    Cookier.Token = \"\";\r\n    Storager.User = null;\r\n    yield new LoadedState();\r\n  }\r\n}\r\n\r\nexport const AuthenticationContext: React.Context<AuthenticationBloc> = React.createContext(new AuthenticationBloc());","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { \r\n  Typography, Container, IconButton, Link, AppBar, Toolbar,\r\n  Button,\r\n  CssBaseline, makeStyles, createStyles, Theme,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n  Menu as MenuIcon,\r\n  ExitToApp as LogoutIcon,\r\n} from \"@material-ui/icons\";\r\n\r\n// Mui Helper \r\n//import Link from '../src/helper/link';\r\nimport config from '../../../config';\r\n\r\n// BLoC\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { useBloc } from '../../../utility/bloc/bloc_utility';\r\nimport { AuthenticationBloc, LoginEvent, LogoutEvent, AuthenticationContext, LoadedState, AuthenticationState, AuthenticationEvent } from '../../../app_bloc';\r\n// import { AuthenticationBloc, AuthenticationContext, AuthenticationState } from '~/src/_global_bloc/authentication_bloc';\r\n// import { CommonState } from '~/src/_global_bloc/common_state';\r\n// import { SearchBloc, PreviousPageEvent, NumberPageEvent, NextPageEvent, SearchInitData, NewQueryEvent } from './search_bloc';\r\n\r\n// Translator\r\n// SSR getInitialProps\r\n// Custom Widgets\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    panel: {\r\n      marginTop: 12,\r\n      marginBottom: 12,\r\n    },\r\n    content: {\r\n      padding: 24,\r\n      border: \"1px solid #d6d9dc\",\r\n      borderTopWidth: 0,\r\n      borderBottomWidth: 0,\r\n      borderLeftWidth: 1,\r\n      borderRightWidth: 0,\r\n    },\r\n    page: {\r\n      border: \"1px solid #d6d9dc\",\r\n      padding: 4,\r\n      margin: 2,\r\n    },\r\n    activePage: {\r\n      color: theme.palette.primary.main\r\n    },\r\n    cardMedia: {\r\n      width: \"25%\"\r\n    },\r\n    margin: {\r\n      margin: theme.spacing(1),\r\n    },\r\n    noneBorder: {\r\n      borderRadius: 0\r\n    },\r\n    tableTitle: {\r\n      color: \"#919191\",\r\n      borderBottom: \"3px solid #e9e9e9\"\r\n    },\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default function Header() {\r\n  const classes = useStyles();\r\n  const [hash, setHash] = React.useState(\"\");\r\n  const bloc = React.useContext(AuthenticationContext);\r\n  const history = useHistory();\r\n\r\n  // Redirect by service, can't listen\r\n  // React.useEffect(() => {\r\n  //   history.listen((his) => {\r\n  //     console.log(`Trigger: ${his.hash}`);\r\n  //     if(his.hash.includes(\"#access_token\"))\r\n  //       bloc.dispatch(new LoginEvent(his.hash.split(\"&\")[0].replace(\"#access_token=\", \"\")));\r\n  //   });\r\n  // });\r\n\r\n  return (\r\n    <AppBar>\r\n      <Toolbar>\r\n        <Typography variant=\"h6\" className={classes.title}>\r\n          RP 機器人\r\n        </Typography>\r\n        <BlocBuilder<AuthenticationBloc, AuthenticationState>\r\n          bloc={bloc}\r\n          builder={(state) => {\r\n            if(state.user != null) {\r\n              return (\r\n                <span>\r\n                  {state.user.displayName + \" 您好\"}\r\n                  <IconButton\r\n                    color=\"secondary\"\r\n                    onClick={(_) => {\r\n                    bloc.dispatch(new LogoutEvent());\r\n                  }}>\r\n                    <LogoutIcon/>\r\n                  </IconButton>\r\n                </span>\r\n              );\r\n            }\r\n            else\r\n              return (\r\n                <Link href={`https://id.twitch.tv/oauth2/authorize?` +\r\n                  `client_id=${config.twitchClientId}&`+\r\n                  `redirect_uri=http://localhost:3000&`+\r\n                  `response_type=token&`+\r\n                  `scope=user:read:email+channel:moderate`}>\r\n                  <Button variant=\"contained\" color=\"secondary\" style={{color: \"#6441a4\", fontWeight: \"bold\"}}>Twitch Login</Button>\r\n                </Link>\r\n              );\r\n          }}\r\n        />\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}","import React from 'react';\r\nimport { \r\n  Typography, Container, Link,\r\n  CssBaseline, makeStyles, createStyles\r\n} from '@material-ui/core';\r\nimport Header from './header';\r\n\r\nimport HomeSrc from '../../../resources/home.png';\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"http://TwitchRPbot.github.io\">\r\n        RPBotAlpha, All right reserved.\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles(theme => createStyles({\r\n  root: (props: any) => ({\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    minHeight: '100vh',\r\n    background: props.background,\r\n    backgroundSize: \"cover\"\r\n  }),\r\n  main: (props: any) => ({\r\n    marginTop: theme.spacing(8),\r\n    marginBottom: theme.spacing(2),\r\n    height: props.isFillMain ? \"calc(100vh - 56px - 120px)\" : \"auto\",\r\n    [theme.breakpoints.up('xs')]: {\r\n      height: props.isFillMain ? \"calc(100vh - 48px - 120px)\" : \"auto\",\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      height: props.isFillMain ? \"calc(100vh - 64px - 120px)\" : \"auto\",\r\n    },\r\n    maxWidth: \"80vw\"\r\n  }),\r\n  footer: {\r\n    padding: theme.spacing(3, 2),\r\n    height: 68,\r\n    marginTop: 'auto',\r\n    textAlign: \"center\",\r\n    backgroundColor: \"#00000036\",\r\n    // backgroundColor:\r\n    //   theme.palette.type === 'dark' ? theme.palette.grey[800] : theme.palette.grey[200],\r\n  },\r\n}));\r\n\r\nexport default function Scaffold({\r\n  children, isFillMain\r\n}: {\r\n  children?: React.ReactNode\r\n  isFillMain?: boolean\r\n}) {\r\n  const classes = useStyles({background: `url(${HomeSrc})`, isFillMain: isFillMain});\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <Header />\r\n      <Container component=\"main\" className={classes.main} maxWidth=\"sm\">\r\n        {/* <Typography variant=\"h2\" component=\"h1\" gutterBottom>\r\n          Sticky footer\r\n        </Typography>\r\n        <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n          {'Pin a footer to the bottom of the viewport.'}\r\n          {'The footer will move as the main element of the page grows.'}\r\n        </Typography>\r\n        <Typography variant=\"body1\">Sticky footer placeholder.</Typography> */}\r\n        { children != null ? children : null}\r\n      </Container>\r\n      <footer className={classes.footer}>\r\n        <Container maxWidth=\"sm\">\r\n          {/* <Typography variant=\"body1\">My sticky footer can be found here.</Typography> */}\r\n          <Copyright />\r\n        </Container>\r\n      </footer>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Link from '@material-ui/core/Link';\r\nimport Scaffold from './_components/scaffold';\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nexport default function Home() {\r\n  return (\r\n    <Scaffold isFillMain={true}>\r\n      <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", height: \"100%\", textAlign: \"center\"}}>\r\n        <Typography variant=\"h2\" component=\"h1\" gutterBottom>\r\n          RP 機器人\r\n        </Typography>\r\n        <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n          {'幫助多個實況同步 Ban 人，一鍵開 Ban'}\r\n          <br />\r\n          {''}\r\n        </Typography>\r\n        <Typography variant=\"body1\">Alpha 版內測中</Typography>\r\n      </div>\r\n    </Scaffold>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Bloc } from '@felangel/bloc';\r\n\r\nexport function useBloc<T extends Bloc<any, any>>(bloc: T) {\r\n  const [isBlocExisted, setBloc] = useState(bloc);\r\n\r\n  // useEffect(() => {\r\n  //   setBloc(bloc);\r\n  //   // ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);\r\n  //   return () => {\r\n  //     ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);\r\n  //   };\r\n  // });\r\n\r\n  return isBlocExisted;\r\n}\r\n","\r\ninterface CommonField {\r\n  isLoading: boolean\r\n  isFailure: boolean\r\n  isSuccess: boolean\r\n}\r\n\r\nexport class CommonState {\r\n  isLoading: boolean;\r\n  isFailure: boolean;\r\n  isSuccess: boolean;\r\n\r\n  private constructor({\r\n    isLoading,\r\n    isFailure,\r\n    isSuccess\r\n  } : CommonField) {\r\n    this.isLoading = isLoading !== undefined ? isLoading : false;\r\n    this.isFailure = isFailure !== undefined ? isFailure : false;\r\n    this.isSuccess = isSuccess !== undefined ? isSuccess : false;\r\n  }\r\n\r\n  public static empty() {\r\n    return new CommonState({\r\n      isLoading: false,\r\n      isFailure: false,\r\n      isSuccess: false\r\n    });\r\n  }\r\n\r\n  public loading() {\r\n    return new CommonState({\r\n      isLoading: true,\r\n      isSuccess: false,\r\n      isFailure: false,\r\n    });\r\n  }\r\n\r\n  public failure() {\r\n    return new CommonState({\r\n      isLoading: false,\r\n      isSuccess: false,\r\n      isFailure: true,\r\n    });\r\n  }\r\n\r\n  public success() {\r\n    return new CommonState({\r\n      isLoading: false,\r\n      isSuccess: true,\r\n      isFailure: false,\r\n    });\r\n  }\r\n}","import React from 'react';\r\n// import createReactContext, { Context } from 'create-react-context';\r\nimport { Bloc } from '@felangel/bloc'\r\nimport UserApiProvider from '../../../data/repository/user_api_provider';\r\n// import StreamerApiProvider from '../data/repository/streamer_api_provider';\r\n// import { CommonState } from '../../../utility/bloc/bloc_utility';\r\nimport { UserResponse } from '../../../data/types/response';\r\nimport { ErrorResponse } from '../../../data/types/response/common';\r\nimport Cookier from '../../../utility/cookier';\r\nimport Storager from '../../../utility/storager';\r\nimport { CommonState } from '../../../utility/bloc/common_state';\r\nimport Joi from 'typesafe-joi';\r\n\r\nexport const CommonStatusSchema = Joi.object({\r\n  code: Joi.number().required(),\r\n  type: Joi.string().required(),\r\n  message: Joi.any(),\r\n});\r\n\r\nexport const SuccessStatusSchema = CommonStatusSchema.keys({\r\n  code: Joi.number().valid(200, 204, 301)\r\n});\r\n\r\nexport type SuccessResponse = Joi.Literal<typeof SuccessStatusSchema>\r\n\r\n\r\nexport abstract class AudienceEvent { // 理論上不用 compare...\r\n}\r\n\r\nexport class ApplyEvent extends AudienceEvent {\r\n  token: string\r\n  constructor(token: string) {\r\n    super();\r\n    this.token = token;\r\n  };\r\n}\r\n\r\n\r\nexport class AudienceBloc extends Bloc<AudienceEvent, CommonState> {\r\n\r\n  constructor(){\r\n    super();\r\n  }\r\n\r\n  initialState(): CommonState {\r\n    return CommonState.empty();\r\n  }\r\n\r\n  async *mapEventToState(event: AudienceEvent) {\r\n    if(event instanceof ApplyEvent) {\r\n      yield* this._mapApplyEventToState(event);\r\n    }\r\n  }\r\n\r\n  private async *_mapApplyEventToState(event: ApplyEvent) {\r\n    yield this.currentState.loading();\r\n\r\n\r\n    const success = await UserApiProvider.apply(\r\n       event.token,\r\n    );\r\n\r\n    console.log(success);\r\n    if(success?.code == 200) {\r\n      yield this.currentState.success();\r\n      return;\r\n    }\r\n    yield this.currentState.failure();\r\n  }\r\n}\r\n\r\nexport const AudienceContext: React.Context<AudienceBloc> = React.createContext(new AudienceBloc());","import React, { useContext } from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Link from '@material-ui/core/Link';\r\nimport Scaffold from '../_components/scaffold';\r\nimport { AuthenticationContext, AuthenticationBloc, AuthenticationState, Permission } from '../../../app_bloc';\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { AudienceBloc, AudienceEvent, ApplyEvent } from './bloc';\r\nimport { useBloc } from '../../../utility/bloc/bloc_utility';\r\nimport { CommonState } from '../../../utility/bloc/common_state';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nexport default function AudienceHome() {\r\n  const authBloc = useContext(AuthenticationContext);\r\n  const bloc = useBloc(new AudienceBloc());\r\n  const token = authBloc.currentState.user?.token;\r\n  if(!token) {\r\n    return (\r\n      <Redirect to={\"/\"} />\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <BlocBuilder<AudienceBloc, CommonState>\r\n      bloc={bloc}\r\n      builder={(state) => {\r\n        console.log(\"???\");\r\n        if(!state.isFailure && !state.isSuccess && !state.isLoading) {\r\n          if(authBloc.currentState.user?.isRequested)\r\n            return (\r\n              <AuthenticatedView />\r\n            );\r\n          return (\r\n            <UnauthenticatedView \r\n              bloc={bloc}\r\n              token={token}\r\n            />\r\n          )\r\n        }\r\n        if(state.isLoading) {\r\n          return (\r\n            <LoadingView />\r\n          )\r\n        }\r\n        if(state.isFailure) {\r\n          return (\r\n            <FailureView />\r\n          )\r\n        }\r\n        if(state.isSuccess) {\r\n          return (\r\n            <AuthenticatedView />\r\n          )\r\n        }\r\n        return (\r\n          <LoadingView />\r\n        );\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction UnauthenticatedView({bloc, token} : {bloc: AudienceBloc, token: string}) {\r\n  return (\r\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", height: \"100%\", textAlign: \"center\"}}>\r\n    <Typography variant=\"h4\" component=\"p\" gutterBottom>\r\n      {`恭喜您成功加入！但為了避免觀眾亂入，請點擊`}\r\n      <Link onClick={(e: any) => {\r\n        //console.log(\"Apply\");\r\n        bloc.dispatch(new ApplyEvent(token));\r\n      }}>\r\n        {\"申請\"}\r\n      </Link>\r\n    </Typography>\r\n    <Typography variant=\"h5\" component=\"h1\" gutterBottom>\r\n      {`等候管理員審核！感謝您～`}\r\n    </Typography>\r\n  </div>\r\n  )\r\n}\r\n\r\n\r\nfunction LoadingView() {\r\n  return (\r\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", height: \"100%\", textAlign: \"center\"}}>\r\n      <Typography variant=\"h4\" component=\"p\" gutterBottom>\r\n        {`申請中...`}\r\n      </Typography>\r\n      <CircularProgress style={{width: 80, height: 80}} />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FailureView() {\r\n  return (\r\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", height: \"100%\", textAlign: \"center\"}}>\r\n      <Typography variant=\"h4\" component=\"p\" style={{color: \"red\"}} gutterBottom>\r\n        {`申請失敗，請重新整理後嘗試。`}\r\n      </Typography>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction AuthenticatedView() {\r\n  return (\r\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", height: \"100%\", textAlign: \"center\"}}>\r\n    <Typography variant=\"h4\" component=\"p\" gutterBottom>\r\n      {`已申請成功！`}\r\n    </Typography>\r\n    <Typography variant=\"h5\" component=\"h1\" gutterBottom>\r\n      {`等候管理員審核！感謝您～`}\r\n    </Typography>\r\n  </div>\r\n  )\r\n}","class ColorPalette {\r\n  static primaryColor = \"#1A2043\";\r\n  static secondaryColor = \"#EBBF86\";\r\n  static fontOnPColor = \"#ffffff\";\r\n  static fontOnSColor = \"#574C53\";\r\n}\r\n\r\nexport default ColorPalette;","import React from 'react';\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { TextFieldProps } from \"@material-ui/core/TextField\";\r\n\r\n// these are the props to be injected by the HOC\r\ninterface withTextEnchancerProps {\r\n  observedValue: string // data is generic\r\n  observedChanged: (data: string) => void\r\n}\r\n\r\nexport const TextFieldEx = ({observedValue, observedChanged, value, onChange, ...props}: TextFieldProps & withTextEnchancerProps) => {\r\n\r\n  const [_value, _setValue] = React.useState(observedValue);\r\n\r\n  React.useEffect(() => {\r\n    // console.log(\"yo??\");\r\n    if(_value !== observedValue)\r\n      observedChanged(_value);\r\n  }, [_value]);\r\n\r\n  React.useEffect(() => {\r\n    // console.log(\"yo??\");\r\n    if(_value !== observedValue)\r\n      _setValue(observedValue);\r\n  }, [observedValue]);\r\n\r\n\r\n  return (\r\n    <TextField value={_value} onChange={(e) => {_setValue(e.currentTarget.value)}} {...props} />\r\n  );\r\n}","import superagent from 'superagent';\r\nimport {StreamerBanRequest, StreamerUnBanRequest} from '../types/request';\r\nimport {SteamerCorpseResponse as StreamerCorpseResponse, SuccessResponse, ErrorResponse} from '../types/response';\r\nimport config from '../../config';\r\n\r\nconst url = \"/streamers\";\r\nclass UserApiProvider {\r\n  static async banUser(request: StreamerBanRequest, token: string) : Promise<SuccessResponse | ErrorResponse | null> {\r\n    try {\r\n      const res = await superagent\r\n        .post(config.api + `${url}`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        .set({'Authorization': 'Bearer ' + token})\r\n        .send(request);\r\n      return res.body;\r\n    } catch(err) {\r\n      console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static async unbanUser(request: StreamerUnBanRequest, token: string) : Promise<SuccessResponse | ErrorResponse | null> {\r\n    try {\r\n      const res = await superagent\r\n        .del(config.api + `${url}`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        .set({'Authorization': 'Bearer ' + token})\r\n        .send(request);\r\n      return res.body;\r\n    } catch(err) {\r\n      console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static async getBanList(token: string, page: number) : Promise<[StreamerCorpseResponse] | null> {\r\n    try {\r\n      const res = await superagent\r\n        .get(config.api + `${url}?page=${page}`)\r\n        .set(\"accept\", \"json\")\r\n        .set({'Content-Type': 'application/json'})\r\n        .set({'Authorization': 'Bearer ' + token})\r\n        .send();\r\n      const user = res.body as [StreamerCorpseResponse];\r\n      return user;\r\n    } catch(err) {\r\n      // console.log(err);\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default UserApiProvider;","import React from 'react';\r\n// import createReactContext, { Context } from 'create-react-context';\r\nimport { Bloc } from '@felangel/bloc'\r\nimport UserApiProvider from '../../../../data/repository/user_api_provider';\r\nimport StreamerApiProvider from '../../../../data/repository/streamer_api_provider';\r\n// import { CommonState } from './utility/bloc/common_state';\r\nimport { UserResponse } from '../../../../data/types/response';\r\nimport Cookier from '../../../../utility/cookier';\r\nimport Storager from '../../../../utility/storager';\r\nimport { CommonState } from '../../../../utility/bloc/common_state';\r\n\r\n\r\n\r\nexport abstract class JudgeViewerEvent { // 理論上不用 compare...\r\n}\r\n\r\nexport class BanEvent extends JudgeViewerEvent {\r\n  username: string;\r\n  reason: string;\r\n  constructor({\r\n    username,\r\n    reason\r\n  }: {\r\n    username: string\r\n    reason?: string\r\n  }) {\r\n    super();\r\n    this.username = username;\r\n    this.reason = reason ? reason : \"\";\r\n  }\r\n}\r\n\r\nexport class UnBanEvent extends JudgeViewerEvent {  \r\n  username: string;\r\n  constructor({\r\n    username\r\n  }: {\r\n    username: string\r\n  }) {\r\n    super();\r\n    this.username = username;\r\n  }\r\n}\r\n\r\n\r\nexport class JudgeViewerBloc extends Bloc<JudgeViewerEvent, CommonState> {\r\n  token: string;\r\n  constructor(token: string){\r\n    super();\r\n    this.token = token;\r\n  }\r\n\r\n  initialState(): CommonState {\r\n    return CommonState.empty();\r\n  }\r\n\r\n  async *mapEventToState(event: JudgeViewerEvent) {\r\n    if(event instanceof BanEvent) {\r\n      yield* this._mapBanEventToState(event);\r\n    } else if(event instanceof UnBanEvent) {\r\n      yield* this._mapUnBanEventToState(event);\r\n    }\r\n  }\r\n\r\n  private async *_mapBanEventToState(event: BanEvent) {\r\n    yield this.currentState.loading();\r\n\r\n    const status = await StreamerApiProvider.banUser({\r\n      username: event.username,\r\n      reason: event.reason\r\n    }, this.token);\r\n\r\n    if(status?.code == 200) {\r\n      yield this.currentState.success();\r\n      return;\r\n    }\r\n    yield this.currentState.failure();\r\n  }\r\n\r\n  private async *_mapUnBanEventToState(event: UnBanEvent) {\r\n    yield this.currentState.loading();\r\n\r\n    const status = await StreamerApiProvider.unbanUser({\r\n      username: event.username,\r\n    }, this.token);\r\n\r\n    if(status?.code == 200) {\r\n      yield this.currentState.success();\r\n      return;\r\n    }\r\n    yield this.currentState.failure();\r\n  }\r\n}\r\n\r\nexport const JudgeViewerContext: React.Context<JudgeViewerBloc> = React.createContext(new JudgeViewerBloc(\"\"));","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { \r\n  Typography, Container, IconButton, Link, AppBar, Toolbar,\r\n  Button,\r\n  CssBaseline, makeStyles, createStyles, Theme, Snackbar,\r\n} from '@material-ui/core';\r\n\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\r\n\r\nimport {\r\n  Menu as MenuIcon,\r\n  ExitToApp as LogoutIcon,\r\n} from \"@material-ui/icons\";\r\n\r\n// Mui Helper \r\n//import Link from '../src/helper/link';\r\nimport config from '../../../config';\r\n\r\n// BLoC\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { useBloc } from '../../../utility/bloc/bloc_utility';\r\nimport { AuthenticationBloc, LoginEvent, LogoutEvent, AuthenticationContext, LoadedState, AuthenticationState, AuthenticationEvent } from '../../../app_bloc';\r\n// import { AuthenticationBloc, AuthenticationContext, AuthenticationState } from '~/src/_global_bloc/authentication_bloc';\r\n// import { CommonState } from '~/src/_global_bloc/common_state';\r\n// import { SearchBloc, PreviousPageEvent, NumberPageEvent, NextPageEvent, SearchInitData, NewQueryEvent } from './search_bloc';\r\n\r\n// Translator\r\n// SSR getInitialProps\r\n// Custom Widgets\r\n\r\nfunction Alert(props: AlertProps) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    panel: {\r\n      marginTop: 12,\r\n      marginBottom: 12,\r\n    },\r\n    content: {\r\n      padding: 24,\r\n      border: \"1px solid #d6d9dc\",\r\n      borderTopWidth: 0,\r\n      borderBottomWidth: 0,\r\n      borderLeftWidth: 1,\r\n      borderRightWidth: 0,\r\n    },\r\n    page: {\r\n      border: \"1px solid #d6d9dc\",\r\n      padding: 4,\r\n      margin: 2,\r\n    },\r\n    activePage: {\r\n      color: theme.palette.primary.main\r\n    },\r\n    cardMedia: {\r\n      width: \"25%\"\r\n    },\r\n    margin: {\r\n      margin: theme.spacing(1),\r\n    },\r\n    noneBorder: {\r\n      borderRadius: 0\r\n    },\r\n    tableTitle: {\r\n      color: \"#919191\",\r\n      borderBottom: \"3px solid #e9e9e9\"\r\n    },\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n  }),\r\n);\r\n\r\nexport default function AutoSnackbar({\r\n  date,\r\n  message,\r\n  severity = \"success\"\r\n}: {\r\n  date: Date,\r\n  message: string,\r\n  severity: \"error\" | \"warning\" | \"info\" | \"success\"\r\n}) {\r\n  // const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\r\n    setOpen(false);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    setOpen(true);\r\n  }, [date]);\r\n\r\n  return (\r\n    <Snackbar open={open} autoHideDuration={2000} onClose={handleClose}>\r\n      <Alert onClose={handleClose} severity={severity} >\r\n        {message}\r\n      </Alert>\r\n    </Snackbar>\r\n  );\r\n}","import React, { useContext } from 'react';\r\nimport {\r\n  Link, Box, Typography, Container, \r\n  Theme, makeStyles, createStyles, Fab, useTheme\r\n} from '@material-ui/core';\r\nimport {\r\n  Whatshot as BanIcon\r\n} from '@material-ui/icons';\r\n\r\nimport Scaffold from '../../_components/scaffold';\r\nimport { AuthenticationContext, AuthenticationBloc, AuthenticationState, Permission } from '../../../../app_bloc';\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { Redirect } from 'react-router-dom';\r\n// import { AudienceBloc, AudienceEvent, ApplyEvent } from './bloc';\r\nimport { useBloc } from '../../../../utility/bloc/bloc_utility';\r\nimport { CommonState } from '../../../../utility/bloc/common_state';\r\nimport { CircularProgress, Card, TextField, CardContent } from '@material-ui/core';\r\nimport { TextFieldEx } from '../../_components/text_field_ex';\r\nimport ColorPalette from '../../../../color_palette';\r\nimport { JudgeViewerBloc, BanEvent, UnBanEvent } from './bloc';\r\nimport AutoSnackbar from '../../_components/auto_snackbar';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    cardRoot: {\r\n      backgroundColor: theme.palette.primary.light,\r\n      color: theme.palette.secondary.light\r\n    },\r\n    textField: {\r\n      backgroundColor: theme.palette.primary.dark,\r\n      color: ColorPalette.fontOnPColor\r\n    }\r\n  }),\r\n);\r\n\r\nexport default function JudgeViewerSection() {\r\n  const classes = useStyles();\r\n  const authBloc = useContext(AuthenticationContext);\r\n  const theme = useTheme();\r\n  // const bloc = useBloc(new AudienceBloc());\r\n  const token = authBloc.currentState.user?.token;\r\n  const bloc = useBloc(new JudgeViewerBloc(token!!));\r\n  if(!token) {\r\n    return (\r\n      <Redirect to={\"/\"} />\r\n    );\r\n  }\r\n\r\n  // username\r\n  let usernameText = \"\";\r\n  let reasonText = \"\";\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card elevation={8} classes={{\r\n        root: classes.cardRoot\r\n      }}>\r\n        <BlocBuilder<JudgeViewerBloc, CommonState>\r\n          bloc={bloc}\r\n          builder={(state) => {\r\n            if(state.isSuccess) {\r\n              usernameText = \"\";\r\n              reasonText = \"\";\r\n            }\r\n            return (\r\n              <CardContent>\r\n                <Typography gutterBottom>請輸入想要 BAN 的 Twitch 用戶名:</Typography>\r\n                <TextFieldEx\r\n                  id=\"outlined-full-width\"\r\n                  style={{ margin: 0 }}\r\n                  placeholder=\"\"\r\n                  //helperText=\"Full width!\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  margin=\"normal\"\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                  variant=\"outlined\"\r\n                  inputProps={{\r\n                    style: { padding: 8 },\r\n                  }}\r\n                  // value={bloc.articleRequest.title}\r\n                  observedValue={usernameText}\r\n                  helperText={\"\"}\r\n                  observedChanged={(value) => {\r\n                    usernameText = value;\r\n                  }}\r\n                />\r\n                <Box height={8} />\r\n                <Typography>理由:</Typography>\r\n                <TextFieldEx\r\n                  id=\"outlined-full-width\"\r\n                  style={{ margin: 0 }}\r\n                  placeholder=\"\"\r\n                  //helperText=\"Full width!\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  margin=\"normal\"\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                  variant=\"outlined\"\r\n                  inputProps={{\r\n                    style: { padding: 8 },\r\n                  }}\r\n                  // value={bloc.articleRequest.title}\r\n                  observedValue={reasonText}\r\n                  helperText={\"\"}\r\n                  observedChanged={(value) => {\r\n                    reasonText = value;\r\n                  }}\r\n                />\r\n                <Box height={16} />\r\n                <div style={{display: \"flex\", justifyContent: \"flex-end\"}}>\r\n                  <Fab variant=\"extended\" \r\n                    style={{backgroundColor: theme.palette.primary.dark, color: theme.palette.text.primary, height: 36}}\r\n                    onClick={(e) => {\r\n                      bloc.dispatch(new UnBanEvent({username: usernameText}));\r\n                    }}\r\n                  >\r\n                    <BanIcon />\r\n                    {\"UNBAN\"}\r\n                  </Fab>\r\n                  <Box width={8} />\r\n                  <Fab variant=\"extended\" \r\n                    style={{backgroundColor: \"rgb(220, 0, 78)\", color: \"orange\", height: 36}}\r\n                    onClick={(e) => {\r\n                      bloc.dispatch(new BanEvent({username: usernameText, reason: reasonText}));\r\n                    }}\r\n                  >\r\n                    <BanIcon />\r\n                    {\"BAN\"}\r\n                  </Fab>\r\n                </div>\r\n                {\r\n                  state.isFailure &&\r\n                    <AutoSnackbar \r\n                      date={new Date()}\r\n                      message=\"發生錯誤，請稍後再試。\"\r\n                      severity=\"error\"\r\n                    />\r\n                }\r\n                {\r\n                  state.isSuccess &&\r\n                    <AutoSnackbar \r\n                      date={new Date()}\r\n                      message=\"操作成功。\"\r\n                      severity=\"success\"\r\n                    />\r\n                }\r\n              </CardContent>\r\n            )\r\n          }}\r\n        />\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport {\r\n  Link, Box, Typography, Container, \r\n  Theme, makeStyles, createStyles, Fab\r\n} from '@material-ui/core';\r\nimport {\r\n  Whatshot as BanIcon\r\n} from '@material-ui/icons';\r\n\r\nimport Scaffold from '../_components/scaffold';\r\nimport { AuthenticationContext, AuthenticationBloc, AuthenticationState, Permission } from '../../../app_bloc';\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { Redirect } from 'react-router-dom';\r\n// import { AudienceBloc, AudienceEvent, ApplyEvent } from './bloc';\r\nimport { useBloc } from '../../../utility/bloc/bloc_utility';\r\nimport { CommonState } from '../../../utility/bloc/common_state';\r\nimport { CircularProgress, Card, TextField, CardContent } from '@material-ui/core';\r\nimport { TextFieldEx } from '../_components/text_field_ex';\r\nimport ColorPalette from '../../../color_palette';\r\nimport JudgeViewerSection from './judge_viewer_section';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    cardRoot: {\r\n      backgroundColor: theme.palette.primary.light,\r\n      color: theme.palette.secondary.light\r\n    },\r\n    textField: {\r\n      backgroundColor: theme.palette.primary.dark,\r\n      color: ColorPalette.fontOnPColor\r\n    }\r\n  }),\r\n);\r\n\r\nexport default function StreamerHome() {\r\n  const classes = useStyles();\r\n  const authBloc = useContext(AuthenticationContext);\r\n  // const bloc = useBloc(new AudienceBloc());\r\n  const token = authBloc.currentState.user?.token;\r\n  if(!token) {\r\n    return (\r\n      <Redirect to={\"/\"} />\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", height: \"100%\"}}>\r\n      <JudgeViewerSection />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\n// import createReactContext, { Context } from 'create-react-context';\r\nimport { Bloc } from '@felangel/bloc'\r\nimport UserApiProvider from '../../../../data/repository/user_api_provider';\r\nimport StreamerApiProvider from '../../../../data/repository/streamer_api_provider';\r\n// import { CommonState } from './utility/bloc/common_state';\r\nimport { UserResponse, GuestUserResponse } from '../../../../data/types/response';\r\nimport Cookier from '../../../../utility/cookier';\r\nimport Storager from '../../../../utility/storager';\r\n\r\nexport abstract class JudgeStreamerState {\r\n}\r\n\r\nexport class EmptyState extends JudgeStreamerState {\r\n}\r\n\r\nexport class LoadingState extends JudgeStreamerState {\r\n  users : Array<GuestUserResponse>;\r\n  page: number;\r\n  selectedId: string;\r\n  constructor(users: Array<GuestUserResponse>, page: number, selectedId: string) {\r\n    super();\r\n    this.users = users;\r\n    this.page = page;\r\n    this.selectedId = selectedId;\r\n  }\r\n}\r\n\r\nexport class LoadedState extends LoadingState {\r\n  constructor(users: Array<GuestUserResponse>, page: number, selectedId: string) {\r\n    super(users, page, selectedId);\r\n  }\r\n}\r\n\r\nexport class SuccessLoadedState extends LoadedState {\r\n  constructor(users: Array<GuestUserResponse>, page: number, selectedId: string) {\r\n    super(users, page, selectedId);\r\n  }\r\n}\r\nexport class FailureLoadedState extends LoadedState {\r\n  constructor(users: Array<GuestUserResponse>, page: number, selectedId: string) {\r\n    super(users, page, selectedId);\r\n  }\r\n}\r\n\r\nexport abstract class JudgeStreamerEvent { // 理論上不用 compare...\r\n\r\n}\r\n\r\nexport class RefreshEvent extends JudgeStreamerEvent {\r\n}\r\n\r\nexport class ScrollToEndEvent extends JudgeStreamerEvent {\r\n}\r\n\r\nexport class VerifyEvent extends JudgeStreamerEvent {  \r\n  id: string;\r\n  constructor({\r\n    id\r\n  }: {\r\n    id: string\r\n  }) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nexport class SelectEvent extends JudgeStreamerEvent {\r\n  id: string;\r\n  constructor({\r\n    id\r\n  }: {\r\n    id: string\r\n  }) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\n// export class UnverifyEvent extends JudgeStreamerEvent {  \r\n//   username: string;\r\n//   constructor({\r\n//     username\r\n//   }: {\r\n//     username: string\r\n//   }) {\r\n//     super();\r\n//     this.username = username;\r\n//   }\r\n// }\r\n\r\n\r\nexport class JudgeStreamerBloc extends Bloc<JudgeStreamerEvent, JudgeStreamerState> {\r\n  token: string;\r\n  constructor(token: string){\r\n    super();\r\n    this.token = token;\r\n  }\r\n\r\n  initialState(): JudgeStreamerState {\r\n    return new EmptyState();\r\n  }\r\n\r\n  // transformEvents(events: Observable<JudgeStreamerEvent>, next: NextFunction<JudgeStreamerEvent, JudgeStreamerState>) {\r\n  //   return events.pipe(concatMap(next))\r\n  // }\r\n\r\n  async *mapEventToState(event: JudgeStreamerEvent) {\r\n    if(event instanceof RefreshEvent) {\r\n      yield* this._mapRefreshEventToState(event);\r\n    } else if(event instanceof ScrollToEndEvent) {\r\n      yield* this._mapScrollToEndEventToState(event);\r\n    } else if(event instanceof VerifyEvent) {\r\n      yield* this._mapVerifyEventToState(event);\r\n    } else if(event instanceof SelectEvent) {\r\n      yield* this._mapSelectEventToState(event);\r\n    }\r\n  }\r\n\r\n  private async *_mapRefreshEventToState(event: RefreshEvent) {\r\n    let empty: Array<GuestUserResponse> = [];\r\n    yield new LoadingState(empty, 0, \"\");\r\n    const appliers = await UserApiProvider.getAppliers(this.token);\r\n    if(appliers && appliers?.length > 0) {\r\n      yield new LoadedState(appliers, 0, \"\");\r\n      return;\r\n    }\r\n    yield new LoadedState(empty, 0, \"\");\r\n  }\r\n\r\n  private async *_mapScrollToEndEventToState(event: ScrollToEndEvent) {\r\n    const currentState = this.currentState as LoadedState;\r\n    yield new LoadingState(currentState.users, currentState.page, currentState.selectedId);\r\n    const appliers = await UserApiProvider.getAppliers(this.token, currentState.users.length / 10 /*currentState.page + 1*/);\r\n    if(!appliers || appliers?.length == 0) {\r\n      yield new LoadedState(currentState.users, currentState.page, currentState.selectedId);\r\n      return;\r\n    }\r\n    const users = currentState.users;\r\n    for(let i = 0; i < appliers.length; i++) {\r\n      const applier = appliers[i];\r\n      const finder = users.find((user) => user?.id == applier?.id);\r\n      if(finder == null)\r\n        users.push(applier);\r\n    }\r\n    // users.concat(appliers);\r\n    if(appliers && appliers?.length != 10) {\r\n      yield new LoadedState(currentState.users, currentState.page, currentState.selectedId);\r\n      return;\r\n    }\r\n    yield new LoadedState(users, currentState.page + 1, \"\");\r\n  }\r\n\r\n  private async *_mapSelectEventToState(event: SelectEvent) {\r\n    const currentState = this.currentState as LoadedState;\r\n    yield new LoadedState(currentState.users, currentState.page, event.id)\r\n  }\r\n\r\n  private async *_mapVerifyEventToState(event: VerifyEvent) {\r\n    const currentState = this.currentState as LoadedState;\r\n    yield new LoadingState(currentState.users, currentState.page, currentState.selectedId);\r\n    const status = await UserApiProvider.confirmApplier(this.token, currentState.selectedId);\r\n    if(status?.code == 200) {\r\n      yield new SuccessLoadedState(currentState.users.filter((user) => user?.id !== currentState.selectedId), currentState.page, \"\");\r\n      return;\r\n    } \r\n    yield new FailureLoadedState(currentState.users, currentState.page, \"\");\r\n  }\r\n}\r\n\r\nexport const JudgeStreamerContext: React.Context<JudgeStreamerBloc> = React.createContext(new JudgeStreamerBloc(\"\"));","import React, { useContext } from 'react';\r\nimport {\r\n  Link, Box, Typography, Container, \r\n  Theme, makeStyles, createStyles, Fab, useTheme, List, ListItem, ListItemText, Avatar, ListItemAvatar\r\n} from '@material-ui/core';\r\nimport {\r\n  Whatshot as BanIcon\r\n} from '@material-ui/icons';\r\n\r\nimport Scaffold from '../../_components/scaffold';\r\nimport { AuthenticationContext, AuthenticationBloc, AuthenticationState, Permission } from '../../../../app_bloc';\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { Redirect } from 'react-router-dom';\r\n// import { AudienceBloc, AudienceEvent, ApplyEvent } from './bloc';\r\nimport { useBloc } from '../../../../utility/bloc/bloc_utility';\r\nimport { CommonState } from '../../../../utility/bloc/common_state';\r\nimport { CircularProgress, Card, TextField, CardContent } from '@material-ui/core';\r\nimport { TextFieldEx } from '../../_components/text_field_ex';\r\nimport ColorPalette from '../../../../color_palette';\r\nimport { JudgeStreamerBloc, JudgeStreamerState, JudgeStreamerEvent, FailureLoadedState, SuccessLoadedState, LoadedState, LoadingState, RefreshEvent, ScrollToEndEvent, VerifyEvent, SelectEvent, EmptyState } from './bloc';\r\nimport AutoSnackbar from '../../_components/auto_snackbar';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    cardRoot: {\r\n      backgroundColor: theme.palette.primary.light,\r\n      color: theme.palette.secondary.light,\r\n      width: \"35vw\"\r\n    },\r\n    textField: {\r\n      backgroundColor: theme.palette.primary.dark,\r\n      color: ColorPalette.fontOnPColor\r\n    },\r\n    selected: {\r\n      backgroundColor: `${theme.palette.secondary.main} !important`,\r\n      color: theme.palette.primary.main\r\n    },\r\n    listTileRoot: {\r\n      backgroundColor: theme.palette.primary.dark,\r\n      color: theme.palette.secondary.main,\r\n    }\r\n  }),\r\n);\r\n\r\nfunction ListSection({state, bloc, classes}:{state: JudgeStreamerState, bloc: JudgeStreamerBloc, classes: Record<\"cardRoot\" | \"textField\" | \"selected\" | \"listTileRoot\", string>}) {\r\n  console.log(state);\r\n  let isEmptyState = state instanceof EmptyState;\r\n  let isLoadedState = state instanceof LoadedState;\r\n  let isLoadingState = state instanceof LoadingState;\r\n  console.log(`${isEmptyState} ${isLoadingState} ${isLoadingState}`)\r\n  if(state instanceof EmptyState || (!isLoadedState && state instanceof LoadingState && (state.users == null || state.users.length == 0))) {\r\n    return (\r\n      <List>\r\n        <ListItem\r\n          button\r\n          // selected={selectedIndex === 3}\r\n          // onClick={event => handleListItemClick(event, 3)}\r\n        >\r\n          <ListItemText primary=\"Spam\" />\r\n        </ListItem>\r\n      </List>\r\n    );\r\n  }\r\n\r\n  const resultState = state as LoadedState;\r\n  return (\r\n    <List\r\n      classes={{\r\n        root: classes.listTileRoot\r\n      }}\r\n    >\r\n      {\r\n        resultState.users.map((user) => (\r\n          <ListItem\r\n            classes={{\r\n              selected: classes.selected\r\n            }}\r\n            key={user?.id}\r\n            button\r\n            selected={resultState.selectedId === user?.id}\r\n            onClick={event => {\r\n              if(isLoadedState) {\r\n                bloc.dispatch(new SelectEvent({\r\n                  id: user!!.id\r\n                }));\r\n              }\r\n            }}\r\n          >\r\n            <ListItemAvatar>\r\n              <Avatar\r\n                src={`${user?.profileImage ? user?.profileImage : \"\"}`}\r\n              />\r\n            </ListItemAvatar>\r\n            <ListItemText primary={`${user?.displayName}`} />\r\n          </ListItem>\r\n        ))\r\n      }\r\n    </List> \r\n  )\r\n}\r\n\r\nfunction Popup({state}:{state: JudgeStreamerState}) {\r\n    if(state instanceof FailureLoadedState)\r\n      return (\r\n          <AutoSnackbar \r\n          date={new Date()}\r\n          message=\"發生錯誤，請稍後再試。\"\r\n          severity=\"error\"\r\n        /> \r\n      )\r\n    if(state instanceof SuccessLoadedState)\r\n      return (\r\n        <AutoSnackbar \r\n          date={new Date()}\r\n          message=\"操作成功。\"\r\n          severity=\"success\"\r\n        />\r\n      )\r\n    return (\r\n      <React.Fragment></React.Fragment>\r\n    )\r\n}\r\n\r\nexport default function JudgeStreamerSection() {\r\n  const classes = useStyles();\r\n  const authBloc = useContext(AuthenticationContext);\r\n  const theme = useTheme();\r\n  // const bloc = useBloc(new AudienceBloc());\r\n  const token = authBloc.currentState.user?.token;\r\n  const bloc = useBloc(new JudgeStreamerBloc(token!!));\r\n  React.useEffect(() => {\r\n    bloc.dispatch(new RefreshEvent());\r\n  })\r\n  \r\n  if(!token) {\r\n    return (\r\n      <Redirect to={\"/\"} />\r\n    );\r\n  }\r\n\r\n  const handleScroll = (event: React.UIEvent<HTMLDivElement>) => {\r\n    if(bloc.state instanceof LoadingState)\r\n      return;\r\n    let scrollTop = event.currentTarget.scrollTop;\r\n    let scrollHeight = event.currentTarget.scrollHeight;\r\n    let offsetHeight = event.currentTarget.offsetHeight;\r\n    let clientHeight = event.currentTarget.clientHeight;\r\n    console.log(`Handle Scroll: (${scrollTop}, ${scrollHeight})`);\r\n    // let itemTranslate = (scrollHeight - scrollTop) < 40;\r\n    if(Math.ceil(scrollHeight - scrollTop) === clientHeight) {\r\n      console.log(\"Event!\");\r\n      bloc.dispatch(new ScrollToEndEvent());\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card elevation={8} classes={{\r\n        root: classes.cardRoot\r\n      }}>\r\n        <Typography \r\n          style={{\r\n            padding: 16\r\n          }}\r\n          gutterBottom>申請清單</Typography>\r\n        <BlocBuilder<JudgeStreamerBloc, JudgeStreamerState>\r\n          bloc={bloc}\r\n          builder={(state) => {\r\n            // const isFailed = state instanceof FailureLoadedState;\r\n            // const isSuccess = state instanceof SuccessLoadedState;\r\n            return (\r\n              <React.Fragment>\r\n                <CardContent \r\n                  style={{\r\n                    maxHeight: \"35vh\",\r\n                    overflow: \"auto\"\r\n                  }}\r\n                  onScroll={handleScroll}\r\n                >\r\n                {\r\n                  <ListSection state={state} bloc={bloc} classes={classes} />\r\n                }\r\n                </CardContent>\r\n                <Box height={16} />\r\n                <div style={{display: \"flex\", justifyContent: \"flex-end\"}}>\r\n                {/* <Fab variant=\"extended\" \r\n                  style={{backgroundColor: theme.palette.primary.dark, color: theme.palette.text.primary, height: 36}}\r\n                  onClick={(e) => {\r\n\r\n                  }}\r\n                >\r\n                  <BanIcon />\r\n                  {\"降格為觀眾\"}\r\n                </Fab> */}\r\n                <Box width={16} />\r\n                <Fab variant=\"extended\" \r\n                  disabled={(state as any)[\"selectedId\"] == null || (state as any).selectedId === \"\"}\r\n                  style={{backgroundColor: (state instanceof LoadedState && state.selectedId !== \"\") ? \"rgb(51, 152, 54)\" : \"rgb(80, 80, 80)\", color: \"white\", height: 36, margin: 16}}\r\n                  onClick={(e) => {\r\n                    bloc.dispatch(new VerifyEvent({id: \"\"}));\r\n                  }}\r\n                >\r\n                  <BanIcon />\r\n                  {\"提升為實況主\"}\r\n                </Fab>\r\n                </div>\r\n                <Popup state={state} />\r\n              </React.Fragment>\r\n            )\r\n          }}\r\n        />\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport {\r\n  Link, Box, Typography, Container, \r\n  Theme, makeStyles, createStyles, Fab, useTheme\r\n} from '@material-ui/core';\r\nimport {\r\n  Whatshot as BanIcon\r\n} from '@material-ui/icons';\r\n\r\nimport Scaffold from '../_components/scaffold';\r\nimport { AuthenticationContext, AuthenticationBloc, AuthenticationState, Permission } from '../../../app_bloc';\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { Redirect } from 'react-router-dom';\r\n// import { AudienceBloc, AudienceEvent, ApplyEvent } from './bloc';\r\nimport { useBloc } from '../../../utility/bloc/bloc_utility';\r\nimport { CommonState } from '../../../utility/bloc/common_state';\r\nimport { CircularProgress, Card, TextField, CardContent } from '@material-ui/core';\r\nimport { TextFieldEx } from '../_components/text_field_ex';\r\nimport ColorPalette from '../../../color_palette';\r\nimport JudgeViewerSection from '../streamer/judge_viewer_section';\r\nimport JudgeStreamerSection from '../manager/judgement_streamer_section';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    cardRoot: {\r\n      backgroundColor: theme.palette.primary.light,\r\n      color: theme.palette.secondary.light\r\n    },\r\n    textField: {\r\n      backgroundColor: theme.palette.primary.dark,\r\n      color: ColorPalette.fontOnPColor\r\n    }\r\n  }),\r\n);\r\n\r\nexport default function ManagerHome() {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const authBloc = useContext(AuthenticationContext);\r\n  // const bloc = useBloc(new AudienceBloc());\r\n  const token = authBloc.currentState.user?.token;\r\n  if(!token) {\r\n    return (\r\n      <Redirect to={\"/\"} />\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"row\", height: \"100%\"}}>\r\n      <JudgeViewerSection />\r\n      <Box width={120} />\r\n      <JudgeStreamerSection />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Link from '@material-ui/core/Link';\r\nimport Scaffold from './_components/scaffold';\r\nimport { AuthenticationContext, AuthenticationBloc, AuthenticationState, Permission } from '../../app_bloc';\r\nimport { BlocBuilder } from '@felangel/react-bloc';\r\nimport { Redirect } from 'react-router-dom';\r\nimport AudienceHome from './audience';\r\nimport StreamerHome from './streamer';\r\nimport ManagerHome from './manager';\r\n\r\nexport default function UserHome() {\r\n  const authBloc = useContext(AuthenticationContext);\r\n\r\n  return (\r\n    <Scaffold isFillMain={true}>\r\n      <BlocBuilder<AuthenticationBloc, AuthenticationState>\r\n        bloc={authBloc}\r\n        builder={(state) => {\r\n          if(!state.user) { // not possible\r\n            return ( <Redirect to={\"/\"} /> );\r\n          }\r\n\r\n          if(state.user.permission === Permission.audience) {\r\n            console.log(\"audience!\");\r\n            return (\r\n              <AudienceHome />\r\n            )\r\n          } else if(state.user.permission == Permission.streamer) {\r\n            return (\r\n              <StreamerHome />\r\n            )\r\n          } else if(state.user.permission == Permission.manager) {\r\n            return (\r\n              <ManagerHome />\r\n            )\r\n          } else {\r\n            return (\r\n              <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", height: \"100%\", textAlign: \"center\"}}>\r\n                <Typography variant=\"h2\" component=\"h1\" gutterBottom>\r\n                  {`還沒建構完成`}\r\n                </Typography>\r\n              </div>\r\n            )\r\n          }\r\n        }}\r\n      />\r\n    </Scaffold>\r\n  );\r\n}\r\n","import red from '@material-ui/core/colors/red';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport ColorPalette from './color_palette';\n\nimport HomeSrc from './resources/home.png';\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: ColorPalette.primaryColor,\n      light: \"#45476e\",\n      dark: \"#00001d\"\n    },\n    secondary: {\n      main: ColorPalette.secondaryColor,\n      light: \"#fff2b6\",\n      dark: \"#b78f58\"\n    },\n    error: {\n      main: red.A400,\n    },\n    text: {\n      primary: ColorPalette.fontOnPColor,\n      secondary: ColorPalette.fontOnSColor,\n    },\n    background: {\n      default:  \"#45476e\", // \"images/home.png\", //'#00001d',\n    },\n  },\n  typography: {\n    fontFamily: [\n      \"Helvetica\",\n      \"Arial\",\n      \"LiHei Pro\",\n      \"黑體-繁\",\n      \"微軟正黑體\",\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport App from './App';\nimport theme from './theme';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n    <CssBaseline />\n    <App />\n  </ThemeProvider>,\n  document.querySelector('#root'),\n);\n","import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Link from '@material-ui/core/Link';\nimport ProTip from './ProTip';\nimport Home from './layouts/pages/home';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  // Link\n} from \"react-router-dom\";\n\n// import { BlocContextProvider } from './utility/bloc/bloc_provider';\nimport { useBloc } from './utility/bloc/bloc_utility';\nimport { AuthenticationBloc, AppStartEvent, AuthenticationContext, LoadedState } from './app_bloc';\nimport { BlocBuilder } from '@felangel/react-bloc';\nimport UserHome from './layouts/pages/user_home';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Your Website\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nexport default function App() {\n  const bloc = useBloc(new AuthenticationBloc());\n  React.useEffect(() => {\n    bloc.dispatch(new AppStartEvent(window.location.hash));\n  })\n\n  return (\n    // <Container maxWidth=\"sm\">\n    // <BlocContextProvider bloc={bloc}>\n    <Router>\n      <AuthenticationContext.Provider value={bloc}>\n        <BlocBuilder \n          bloc={bloc}\n          builder={(state) => {\n            if(state instanceof LoadedState)  {\n              if(state.user != null) {\n                return (\n                  <Switch>\n                    <Route path=\"/\">\n                      <UserHome />\n                    </Route>\n                  </Switch>  \n                );\n              }\n            }\n            return (\n              <Switch>\n                <Route path=\"/\">\n                  <Home />\n                </Route>\n              </Switch>  \n            )\n          }}\n        />\n      </AuthenticationContext.Provider>\n    </Router>\n    // </BlocContextProvider>\n    // </Container>\n  );\n}\n"],"sourceRoot":""}